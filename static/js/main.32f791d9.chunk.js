(this["webpackJsonpcinema-app"]=this["webpackJsonpcinema-app"]||[]).push([[0],{125:function(t,e,a){"use strict";a.r(e);var o=a(0),n=a.n(o),r=a(10),c=a.n(r),i=(a(97),a(172)),s=a(85),j=a(173),l=a(38),u=a(11),b=a(159),f=a(164),O=a(162),d=a(165),m=a(128),v=a(5),h=Object(b.a)((function(t){return{root:{display:"flex",justifyContent:"center"},logo:{fontWeight:"bold",fontFamily:"Arvo"},logoLink:{textDecoration:"none",color:t.palette.primary.logoText}}})),x=function(){var t=h();return Object(v.jsx)(O.a,{position:"sticky",children:Object(v.jsx)(f.a,{maxWidth:"md",children:Object(v.jsx)(d.a,{className:t.root,children:Object(v.jsx)(l.b,{to:"/",className:t.logoLink,children:Object(v.jsx)(m.a,{variant:"h4",className:t.logo,children:"Cinema APP"})})})})})},p=a(17),g=a(166),F=a(167),w=a(53),y=a.n(w),I=a(54),N=a.n(I),S=Object(b.a)({root:{width:"100%",position:"fixed",left:0,bottom:0,boxShadow:"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)"}}),E=function(){var t=S(),e=Object(u.f)(),a=Object(u.g)(),r=n.a.useState("/"),c=Object(p.a)(r,2),i=c[0],s=c[1];return Object(o.useEffect)((function(){"/favoritos"===a.pathname?s("/favoritos"):s("/")}),[a]),Object(v.jsxs)(g.a,{className:t.root,value:i,onChange:function(t,a){e.push(a)},showLabels:!0,children:[Object(v.jsx)(F.a,{label:"Buscar",value:"/",icon:Object(v.jsx)(y.a,{})}),Object(v.jsx)(F.a,{label:"Favoritos",value:"/favoritos",icon:Object(v.jsx)(N.a,{})})]})},C=function(){var t=localStorage.getItem("favorites");return t?JSON.parse(t):{}},M=function(){var t=Object(o.useState)((function(){return C()})),e=Object(p.a)(t,2),a=e[0],n=e[1],r=function(t){return Boolean(a[t.imdbID])};return Object(o.useEffect)((function(){localStorage.setItem("favorites",JSON.stringify(a))}),[a]),{isMovieFavorite:r,toogleFavorite:function(t){var e=C();r(t)?delete e[t.imdbID]:e[t.imdbID]=t,n(e)},favorites:a}},k=a(168),B=a(169),T=a(170),P=a(83),D=a.n(P),W=Object(b.a)((function(t){return{root:{width:"300px"},poster:{width:"100%"},row:{display:"flex",flexFlow:"row",justifyContent:"space-between",alignItems:"center"},favoriteButton:{padding:"0.5rem"},favoriteIcon:{width:38,height:38}}})),A=function(t){var e=t.movie,a=t.isMovieFavorite,o=t.toogleFavorite,n=W();return Object(v.jsxs)(k.a,{className:n.root,children:[Object(v.jsx)("img",{className:n.poster,alt:e.Title,src:e.Poster,onError:function(t){return t.target.src="https://via.placeholder.com/300x300.png/fff/FF9E10?text=Poster+n%C3%A3o+encontrado!"}}),Object(v.jsxs)(B.a,{children:[Object(v.jsx)(m.a,{variant:"h5",component:"h2",children:e.Title}),Object(v.jsxs)("div",{className:n.row,children:[Object(v.jsx)(m.a,{variant:"h6",component:"h2",children:e.Year}),Object(v.jsx)(T.a,{className:n.favoriteButton,onClick:function(){return o(e)},children:a(e)?Object(v.jsx)(N.a,{className:n.favoriteIcon,color:"primary"}):Object(v.jsx)(D.a,{className:n.favoriteIcon,color:"primary"})})]})]})]})},J=Object(b.a)((function(t){return{root:{display:"flex",flexFlow:"row wrap",justifyContent:"space-evenly",alignItems:"flex-start",gap:"2em",padding:"2em"}}})),L=function(t){var e=t.movies,a=t.isMovieFavorite,o=void 0===a?null:a,n=t.toogleFavorite,r=void 0===n?null:n,c=J(),i=M(),s=i.isMovieFavorite,j=i.toogleFavorite;return Object(v.jsxs)("main",{className:c.root,children:[!e.length&&Object(v.jsx)(m.a,{variant:"h5",component:"h2",children:"Nenhum resultado encontrado."}),e.map((function(t){return Object(v.jsx)(A,{movie:t,isMovieFavorite:o||s,toogleFavorite:r||j},t.imdbID)}))]})},R=function(){var t=Object(o.useState)([]),e=Object(p.a)(t,2),a=e[0],n=e[1],r=M(),c=r.isMovieFavorite,i=r.toogleFavorite,s=r.favorites;return Object(o.useEffect)((function(){n(Object.keys(s).map((function(t){return s[t]})))}),[s]),Object(v.jsx)(L,{movies:a,isMovieFavorite:c,toogleFavorite:i})},q=a(64),G=a(84),U=a.n(G).a.create({baseURL:"https://www.omdbapi.com/"});U.interceptors.request.use((function(t){return t.params=t.params||{},t.params.apikey="4eb8f806",t}),(function(t){return Promise.reject(t)}));var Y=U,z=a(174),H=a(171),K=Object(b.a)((function(t){return{root:{width:"90%",maxWidth:"600px"}}})),Q=function(t){var e=t.onChange,a=K();return Object(v.jsx)(z.a,{className:a.root,label:"Buscar",variant:"outlined",onChange:e,InputProps:{startAdornment:Object(v.jsx)(H.a,{position:"start",children:Object(v.jsx)(y.a,{color:"primary"})})}})},V=Object(b.a)((function(t){return{root:{display:"flex",flexFlow:"column",alignItems:"center",paddingTop:"2em"},searchBar:{width:"90%",maxWidth:"600px"}}})),X=function(){var t=V(),e=Object(o.useState)([]),a=Object(p.a)(e,2),n=a[0],r=a[1],c=Object(o.useState)(""),i=Object(p.a)(c,2),s=i[0],j=i[1],l=Object(o.useState)(1),u=Object(p.a)(l,2),b=u[0],f=u[1],O=Object(o.useState)(0),d=Object(p.a)(O,2),h=d[0],x=d[1],g=Object(o.useRef)(null),F=function(t,e){var a=Object(o.useState)(t),n=Object(p.a)(a,2),r=n[0],c=n[1];return Object(o.useEffect)((function(){var a=setTimeout((function(){c(t)}),e);return function(){clearTimeout(a)}}),[t,e]),r}(s,1e3);return Object(o.useEffect)((function(){F.trim()?Y.get("",{params:{s:F}}).then((function(t){f(1),t.data.Error?r([]):(r(t.data.Search),x(parseInt(t.data.totalResults)))})):(r([]),x(0),f(1))}),[F]),Object(o.useEffect)((function(){var t=new IntersectionObserver((function(t){t[0].isIntersecting&&f((function(t){return t+1}))}),{root:null,rootMargin:"20px",threshold:1});g.current&&t.observe(g.current)}),[]),Object(o.useEffect)((function(){b>1&&n.length<h&&Y.get("",{params:{s:s,page:b}}).then((function(t){t.data.Error?(r([]),x(0),f(1)):(r([].concat(Object(q.a)(n),Object(q.a)(t.data.Search))),x(parseInt(t.data.totalResults)))}))}),[b]),Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)(Q,{onChange:function(t){return j(t.target.value)}}),Object(v.jsx)(L,{movies:n}),Object(v.jsx)(m.a,{ref:g,variant:"h6",component:"h2",children:n.length<h&&"Carregando mais resultados..."})]})},Z=Object(b.a)((function(t){return{root:{flexGrow:1,paddingBottom:"56px"}}})),$=function(){var t=Z();return Object(v.jsxs)(l.a,{children:[Object(v.jsx)(x,{}),Object(v.jsx)(f.a,{maxWidth:"md",className:t.root,children:Object(v.jsxs)(u.c,{children:[Object(v.jsx)(u.a,{exact:!0,path:"/",children:Object(v.jsx)(X,{})}),Object(v.jsx)(u.a,{path:"/favoritos",children:Object(v.jsx)(R,{})})]})}),Object(v.jsx)(E,{})]})},_=Object(s.a)({palette:{primary:{main:"#FF9E10",logoText:"#FFF"},secondary:{main:"#FF9E10"}}}),tt=function(){return Object(v.jsxs)(i.a,{theme:_,children:[Object(v.jsx)(j.a,{}),Object(v.jsx)($,{})]})};c.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(tt,{})}),document.getElementById("root"))},97:function(t,e,a){}},[[125,1,2]]]);
//# sourceMappingURL=main.32f791d9.chunk.js.map