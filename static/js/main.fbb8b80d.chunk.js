(this["webpackJsonpcinema-app"]=this["webpackJsonpcinema-app"]||[]).push([[0],{101:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var o=a(0),r=a.n(o),n=a(10),c=a.n(n),i=(a(101),a(178)),s=a(87),l=a(179),j=a(15),u=a(88),b=a(165),d=function(e){return{palette:Object(u.a)({type:e?"dark":"light"},e?{primary:{main:"#FF9E10",appBar:"#424242",logoText:"#FF9E10"},secondary:{main:"#FF9E10"}}:{primary:{main:"#FF9E10",appBar:"#FF9E10",logoText:"#FFF"},secondary:{main:"#FF9E10"}})}},f=a(41),m=a(11),p=a(166),O=a(170),h=a(169),x=a(171),v=a(132),g=a(172),F=a(83),k=a.n(F),y=a(84),w=a.n(y),I=a(4),M=Object(p.a)((function(e){return{appBar:{backgroundColor:e.palette.primary.appBar},root:{display:"flex",justifyContent:"center"},logo:{fontWeight:"bold",fontFamily:"Arvo"},logoLink:{textDecoration:"none",color:e.palette.primary.logoText},themeToggle:{position:"absolute",top:"7px",bottom:"7px",right:"5px"}}})),N=function(e){var t=e.useDarkMode,a=t.isDarkMode,o=t.toogleIsDarkMode,r=M();return Object(I.jsxs)(h.a,{position:"sticky",className:r.appBar,children:[Object(I.jsx)(O.a,{maxWidth:"md",children:Object(I.jsx)(x.a,{className:r.root,children:Object(I.jsx)(f.b,{to:"/",className:r.logoLink,children:Object(I.jsx)(v.a,{variant:"h4",className:r.logo,children:"Cinema APP"})})})}),Object(I.jsx)(g.a,{className:r.themeToggle,onClick:o,children:a?Object(I.jsx)(k.a,{color:"primary"}):Object(I.jsx)(w.a,{className:r.logoLink})})]})},S=a(173),E=a(174),D=a(56),B=a.n(D),C=a(57),T=a.n(C),P=Object(p.a)({root:{width:"100%",position:"fixed",left:0,bottom:0,boxShadow:"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)"}}),L=function(){var e=P(),t=Object(m.f)(),a=Object(m.g)(),n=r.a.useState("/"),c=Object(j.a)(n,2),i=c[0],s=c[1];return Object(o.useEffect)((function(){"/favoritos"===a.pathname?s("/favoritos"):s("/")}),[a]),Object(I.jsxs)(S.a,{className:e.root,value:i,onChange:function(e,a){t.push(a)},showLabels:!0,children:[Object(I.jsx)(E.a,{label:"Buscar",value:"/",icon:Object(I.jsx)(B.a,{})}),Object(I.jsx)(E.a,{label:"Favoritos",value:"/favoritos",icon:Object(I.jsx)(T.a,{})})]})},W=function(){var e=localStorage.getItem("favorites");return e?JSON.parse(e):{}},A=function(){var e=Object(o.useState)((function(){return W()})),t=Object(j.a)(e,2),a=t[0],r=t[1],n=function(e){return Boolean(a[e.imdbID])};return Object(o.useEffect)((function(){localStorage.setItem("favorites",JSON.stringify(a))}),[a]),{isMovieFavorite:n,toogleFavorite:function(e){var t=W();n(e)?delete t[e.imdbID]:t[e.imdbID]=e,r(t)},favorites:a}},J=a(175),R=a(176),q=a(85),G=a.n(q),U=Object(p.a)((function(e){return{root:{width:"300px"},poster:{width:"100%"},row:{display:"flex",flexFlow:"row",justifyContent:"space-between",alignItems:"center"},favoriteButton:{padding:"0.5rem"},favoriteIcon:{width:38,height:38}}})),Y=function(e){var t=e.movie,a=e.isMovieFavorite,o=e.toogleFavorite,r=U();return Object(I.jsxs)(J.a,{className:r.root,children:[Object(I.jsx)("img",{className:r.poster,alt:t.Title,src:t.Poster,onError:function(e){return e.target.src="https://via.placeholder.com/300x300.png/fff/FF9E10?text=Poster+n%C3%A3o+encontrado!"}}),Object(I.jsxs)(R.a,{children:[Object(I.jsx)(v.a,{variant:"h5",component:"h2",children:t.Title}),Object(I.jsxs)("div",{className:r.row,children:[Object(I.jsx)(v.a,{variant:"h6",component:"h2",children:t.Year}),Object(I.jsx)(g.a,{className:r.favoriteButton,onClick:function(){return o(t)},children:a(t)?Object(I.jsx)(T.a,{className:r.favoriteIcon,color:"primary"}):Object(I.jsx)(G.a,{className:r.favoriteIcon,color:"primary"})})]})]})]})},z=Object(p.a)((function(e){return{root:{display:"flex",flexFlow:"row wrap",justifyContent:"space-evenly",alignItems:"flex-start",gap:"2em",padding:"2em"}}})),H=function(e){var t=e.movies,a=e.isMovieFavorite,o=void 0===a?null:a,r=e.toogleFavorite,n=void 0===r?null:r,c=z(),i=A(),s=i.isMovieFavorite,l=i.toogleFavorite;return Object(I.jsxs)("main",{className:c.root,children:[!t.length&&Object(I.jsx)(v.a,{variant:"h5",component:"h2",children:"Nenhum resultado encontrado."}),t.map((function(e){return Object(I.jsx)(Y,{movie:e,isMovieFavorite:o||s,toogleFavorite:n||l},e.imdbID)}))]})},K=function(){var e=Object(o.useState)([]),t=Object(j.a)(e,2),a=t[0],r=t[1],n=A(),c=n.isMovieFavorite,i=n.toogleFavorite,s=n.favorites;return Object(o.useEffect)((function(){r(Object.keys(s).map((function(e){return s[e]})))}),[s]),Object(I.jsx)(H,{movies:a,isMovieFavorite:c,toogleFavorite:i})},Q=a(64),V=a(86),X=a.n(V).a.create({baseURL:"https://www.omdbapi.com/"});X.interceptors.request.use((function(e){return e.params=e.params||{},e.params.apikey="4eb8f806",e}),(function(e){return Promise.reject(e)}));var Z=X,$=a(180),_=a(177),ee=Object(p.a)((function(e){return{root:{width:"90%",maxWidth:"600px"}}})),te=function(e){var t=e.onChange,a=ee();return Object(I.jsx)($.a,{className:a.root,label:"Buscar",variant:"outlined",onChange:t,InputProps:{startAdornment:Object(I.jsx)(_.a,{position:"start",children:Object(I.jsx)(B.a,{color:"primary"})})}})},ae=Object(p.a)((function(e){return{root:{display:"flex",flexFlow:"column",alignItems:"center",paddingTop:"2em"},searchBar:{width:"90%",maxWidth:"600px"}}})),oe=function(){var e=ae(),t=Object(o.useState)([]),a=Object(j.a)(t,2),r=a[0],n=a[1],c=Object(o.useState)(""),i=Object(j.a)(c,2),s=i[0],l=i[1],u=Object(o.useState)(1),b=Object(j.a)(u,2),d=b[0],f=b[1],m=Object(o.useState)(0),p=Object(j.a)(m,2),O=p[0],h=p[1],x=Object(o.useRef)(null),g=function(e,t){var a=Object(o.useState)(e),r=Object(j.a)(a,2),n=r[0],c=r[1];return Object(o.useEffect)((function(){var a=setTimeout((function(){c(e)}),t);return function(){clearTimeout(a)}}),[e,t]),n}(s,1e3);return Object(o.useEffect)((function(){g.trim()?Z.get("",{params:{s:g}}).then((function(e){f(1),e.data.Error?n([]):(n(e.data.Search),h(parseInt(e.data.totalResults)))})):(n([]),h(0),f(1))}),[g]),Object(o.useEffect)((function(){var e=new IntersectionObserver((function(e){e[0].isIntersecting&&f((function(e){return e+1}))}),{root:null,rootMargin:"20px",threshold:1});x.current&&e.observe(x.current)}),[]),Object(o.useEffect)((function(){d>1&&r.length<O&&Z.get("",{params:{s:s,page:d}}).then((function(e){e.data.Error?(n([]),h(0),f(1)):(n([].concat(Object(Q.a)(r),Object(Q.a)(e.data.Search))),h(parseInt(e.data.totalResults)))}))}),[d]),Object(I.jsxs)("div",{className:e.root,children:[Object(I.jsx)(te,{onChange:function(e){return l(e.target.value)}}),Object(I.jsx)(H,{movies:r}),Object(I.jsx)(v.a,{ref:x,variant:"h6",component:"h2",children:r.length<O&&"Carregando mais resultados..."})]})},re=Object(p.a)((function(e){return{root:{flexGrow:1,paddingBottom:"56px"}}})),ne=function(e){var t=e.useDarkMode,a=re();return Object(I.jsxs)(f.a,{children:[Object(I.jsx)(N,{useDarkMode:t}),Object(I.jsx)(O.a,{maxWidth:"md",className:a.root,children:Object(I.jsxs)(m.c,{children:[Object(I.jsx)(m.a,{exact:!0,path:"/",children:Object(I.jsx)(oe,{})}),Object(I.jsx)(m.a,{path:"/favoritos",children:Object(I.jsx)(K,{})})]})}),Object(I.jsx)(L,{})]})},ce=function(){var e=function(){var e=localStorage.getItem("theme"),t=Object(b.a)("(prefers-color-scheme: dark)",{noSsr:!0}),a=null!==e&&e||t&&"dark"||"light",r=Object(o.useState)("dark"===a),n=Object(j.a)(r,2),c=n[0],i=n[1];return{isDarkMode:c,toogleIsDarkMode:function(){i(!c),localStorage.setItem("theme",c?"light":"dark")},getPalette:d}}(),t=e.isDarkMode,a=e.getPalette,n=e.toogleIsDarkMode,c=r.a.useMemo((function(){return Object(s.a)(a(t))}),[t,a]);return Object(I.jsxs)(i.a,{theme:c,children:[Object(I.jsx)(l.a,{}),Object(I.jsx)(ne,{useDarkMode:{isDarkMode:t,toogleIsDarkMode:n}})]})};c.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(ce,{})}),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.fbb8b80d.chunk.js.map